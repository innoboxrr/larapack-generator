<?php

namespace Namespace\Http\Requests\PascalCaseModelName;

use Namespace\Models\PascalCaseModelName;
use Illuminate\Foundation\Http\FormRequest;

class PoliciesRequest extends FormRequest
{

    public function authorize()
    {
        return true;
    }

    public function rules()
    {
        return [
            'id' => 'nullable|numeric|exists:Namespace\Models\PascalCaseModelName,id'
        ];
    }

    public function handle()
    {

        $camelCaseModelName = ($this->id) ? 
            PascalCaseModelName::findOrFail($this->id) : 
            app(PascalCaseModelName::class);

        return response()->json([
            'index'          => user()->can('index', $camelCaseModelName),
            'view'           => user()->can('view', $camelCaseModelName),
            'viewAny'        => user()->can('viewAny', $camelCaseModelName),
            'create'         => user()->can('create', $camelCaseModelName),
            'update'         => user()->can('update', $camelCaseModelName),
            'delete'         => user()->can('delete', $camelCaseModelName),
            'restore'        => user()->can('restore', $camelCaseModelName),
            'forceDelete'    => user()->can('forceDelete', $camelCaseModelName),
            'export'         => user()->can('export', $camelCaseModelName),
        ]);

    }
    
}
